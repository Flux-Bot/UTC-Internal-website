<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Sandbox</title>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js"
		integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
</head>

<body>

	<h1>Sandbox</h1>

	<div class="articles">
		<span class="loading">
			Loading..
		</span>
		<!-- Dummy article structure START -->
		<div class="article" style="display: none;">
			<h4 class="article-title">This is the title</h4>
			<div class="article-shortDescription">
				Lorem ipsum dolor sit amet, consectetur adipisicing elit. Saepe eos ad laboriosam harum in earum totam
				perspiciatis suscipit illum, doloremque velit.
			</div>
			<hr>
		</div>
		<!-- Dummy article structure End -->
	</div>

	<script>

		$(document).ready(function () {

			var access_token = "oHy3cU2_3o4kuHEZX8HE4b3pvUFwxU8-YXn1qPKGYpA";
			var space = "28pe32ti9xv4";
			var content_type = "news";

			var url = "https://cdn.contentful.com/spaces/" + space + "/environments/master/entries?access_token=" + access_token + "&content_type=" + content_type;

			console.log("Making request to contentful on:", url);

			$.ajax(url).done(function (response) {

				var articles = response.items.map(function (article) {
					return article.fields;
				});

				var articleContainer = $(".articles");
				var articleTemplate = articleContainer.find(".article").clone();

				console.log("Retrieved:", articles);

				articles.forEach(function (article) {
					var newArticle = articleTemplate.clone();
					newArticle.find(".article-title").html(article.title);
					newArticle.find(".article-shortDescription").html(article.shortDescription);
					newArticle.css("display", "block");
					articleContainer.append(newArticle);
				});

				articleContainer.find(".loading").remove();

				console.log("rendered articles.");

			});

		});

	</script>

</body>

</html>